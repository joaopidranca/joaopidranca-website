<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex,nofollow" />
    <title>Árvore Genalógica</title>
        
    <link rel="icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/joaopidranca/joaopidranca-multimedia@main/favicon.ico" />
    <script src="https://cdn.jsdelivr.net/gh/joaopidranca/joaopidranca-website@main/js/familytree.js"></script>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Hanken+Grotesk:ital,wght@0,100..900;1,100..900&display=swap");
        body {
            font-family: "Hanken Grotesk";
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        #grainad {
            position: fixed !important;
            top: 0%;
            left: 0%;
            content: "";
            height: 100%;
            width: 100%;
            pointer-events: none;
            z-index: 10000;
        }
        #search-bar, #date-nav {
            margin-bottom: 20px;
        }
        #search-input {
            width: 70%;
            padding: 5px;
        }
        #search-button {
            padding: 5px 10px;
        }
        #posts {
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }
        .post {
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        .post h2 {
            margin-bottom: 5px;
        }
        .post-date {
            color: #666;
            font-size: 0.9em;
        }
        .post-content {
            margin-top: 10px;
        }

        .button {
            border: none;
            background-color: #e04220;
            color: #202020;
            padding: 12px 40px;
            border-radius: 0px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
        }

        .button:hover{
            background-color: #e04220;
            color: white;
        }

    </style> 
</head>
<body>
    <div id="grainad"></div>

    <h1>Árvore Genelógica do Pidrança</h1>
    <p>Bem-vindo a esta página!</p>
    <p>Aqui encontra-se tudo o que consigo descobrir sobre o apelido "Pidrança".</p>
    <p>Desde os primos aos tios, do avô aos tetra-avós</p>
    
    <div id="search-bar">
        <input type="text" id="search-input" placeholder="Procurar por conteúdo...">
        <button id="search-button" onclick="searchPosts()">Procurar</button>
    </div>

    <div id="date-nav">
        <label for="year">Ano:</label>
        <select id="year">
            <option value="">Todos os anos</option>
        </select>
        
        <label for="month">Mês:</label>
        <select id="month">
            <option value="">Todos os meses</option>
        </select>
        
        <button onclick="filterPosts()">Procurar</button>
    </div>
    

    <!-- BALKAN FAMILY TREE -->
   <div id="tree"></div> 



    <script>
        // BALKAN FAMILY TREE JS CODE

   //JavaScript
var options = getOptions();

var family = new FamilyTree(document.getElementById('tree'), {
    mouseScrool: FamilyTree.none,
    scaleInitial: options.scaleInitial,
    mode: 'light',
    template: 'hugo',
    roots: [3],
    nodeMenu: {
        //edit: { text: 'Edit' },
        details: { text: 'Details' },
    },
    nodeTreeMenu: false,
    nodeBinding: {
        field_0: 'name',
        field_1: 'born',
        img_0: 'photo'
    },
    editForm: {
        readOnly: true,
        titleBinding: "name",
        photoBinding: "photo",
        //addMoreBtn: 'Add element',
        //addMore: 'Add more elements',
        //addMoreFieldName: 'Element name',
        generateElementsFromFields: false,
        elements: [
            { type: 'textbox', label: 'Full Name', binding: 'name' },
            { type: 'textbox', label: 'Email Address', binding: 'email' },
            [
                { type: 'textbox', label: 'Phone', binding: 'phone' },
                { type: 'date', label: 'Date Of Birth', binding: 'born' }
            ],
            [
                { type: 'select', options: [{ value: 'bg', text: 'Bulgaria' }, { value: 'ru', text: 'Russia' }, { value: 'gr', text: 'Greece' }], label: 'Country', binding: 'country' },
                { type: 'textbox', label: 'City', binding: 'city' },
            ],
            { type: 'textbox', label: 'Photo Url', binding: 'photo', btn: 'Upload' },
        ]
    },
});

family.on('field', function (sender, args) {
    if (args.name == 'born') {
        var date = new Date(args.value);
        args.value = date.toLocaleDateString();
    }
});


family.load(
    [
        { id: 1, pids: [3], gender: 'male', name: 'Zeph Daniels', born: '1954-09-29' },
        { id: 2, pids: [3], gender: 'male', name: 'Rowan Annable', born: '1952-10-10' },
        { id: 3, pids: [1, 2], gender: 'female', name: 'Laura Shepherd', born: '1943-01-13', email: 'laura.shepherd@gmail.com', phone: '+44 845 5752 547', city: 'Moscow', country: 'ru' },
        { id: 4, pids: [5], name: 'Rowan Annable' },
        { id: 5, pids: [4], gender: 'female', name: 'Lois Sowle' },
        { id: 6, mid: 2, fid: 3, pids: [7], gender: 'female', name: 'Maria da Luz Diniz Pidrança', born: '1956-03-22' },
        { id: 7, pids: [6], mid: 5, fid: 4, gender: 'male', name: 'João Carlos Cabral Gomes', born: '1959-12-11' },
        { id: 8, mid: 7, fid: 6, gender: 'male', name: 'João Francisco Pidrança Gomes', born: '1998-08-16' }
    ]
);

function getOptions(){
    const searchParams = new URLSearchParams(window.location.search);
    var fit = searchParams.get('fit');
    var enableSearch = true;
    var scaleInitial = 1;
    if (fit == 'yes'){
        enableSearch = false;
        scaleInitial = FamilyTree.match.boundary;
    }
    return {enableSearch, scaleInitial};
}


        
    </script>
        <!-- Grain JS -->
    <script src="https://cdn.jsdelivr.net/npm/grained@0.0.2/grained.min.js"></script>

    <!-- Grain Settings JS -->
    <script src="https://cdn.jsdelivr.net/gh/joaopidranca/joaopidranca-website@main/js/grain-settings.min.js"></script>
</body>
</html>
